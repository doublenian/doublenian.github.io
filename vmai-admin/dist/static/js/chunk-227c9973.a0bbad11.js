(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-227c9973"],{7884:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:" w-full px-10 pt-10"},[n("el-button",{staticClass:" mb-5",attrs:{type:"primary"},on:{click:e.addParentMenu}},[e._v("添加菜单")]),e._v(" "),n("el-table",{attrs:{data:e.tableData,"row-key":"id",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[n("el-table-column",{attrs:{prop:"name",label:"一级菜单"}}),e._v(" "),n("el-table-column",{attrs:{prop:"chTitle",label:"中文标题"}}),e._v(" "),n("el-table-column",{attrs:{prop:"enTitle",label:"英文标题"}}),e._v(" "),n("el-table-column",{attrs:{prop:"position",label:"所在版块"}}),e._v(" "),n("el-table-column",{attrs:{prop:"weight",label:"权重"}}),e._v(" "),n("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-tag",{attrs:{type:1===r.Meta.state?"success":"danger"}},[e._v(e._s(r.statusText))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"260px"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.setUpOrDown(r)}}},[e._v(e._s(1==r.Meta.state?"下架":"上架"))]),e._v(" "),r.child?[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.deleteMenu(r)}}},[e._v("删除")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.editChild(r)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.deleteMenu(r)}}},[e._v("删除")])]:0===r.children.length?[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.addChild(r)}}},[e._v("添加子菜单")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.editParent(r)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.deleteMenu(r)}}},[e._v("删除")])]:[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.addChild(r)}}},[e._v("添加子菜单")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.editParent(r)}}},[e._v("编辑")])]]}}])})],1),e._v(" "),n("block-dialog",{ref:"blockDialog"})],1)},l=[],i=(n("8e6e"),n("456d"),n("55dd"),n("bd86")),o=(n("7f7f"),n("ac6a"),n("96cf"),n("3b8d")),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"添加一级菜单",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-type":"right","label-width":"80px"}},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"模块ID"}},[n("p",[e._v(e._s(this.form.id))])])],1),e._v(" "),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"模块名称",prop:"name"}},[n("el-input",{staticClass:" w-1/2",model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"中文标题",prop:"chTitle"}},[n("el-input",{staticClass:" w-full",model:{value:e.form.chTitle,callback:function(t){e.$set(e.form,"chTitle",t)},expression:"form.chTitle"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"英文标题",prop:"enTitle"}},[n("el-input",{staticClass:" w-full",model:{value:e.form.enTitle,callback:function(t){e.$set(e.form,"enTitle",t)},expression:"form.enTitle"}})],1)],1),e._v(" "),1==e.form.level?n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"菜单位置",prop:"type"}},[n("el-select",{attrs:{placeholder:"请选择菜单位置"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1):e._e(),e._v(" "),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"链接",prop:"link"}},[n("el-input",{staticClass:" w-8/12",attrs:{type:"text",placeholder:"填写链接"},model:{value:e.form.link,callback:function(t){e.$set(e.form,"link",t)},expression:"form.link"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"权重",prop:"weight"}},[n("el-input",{staticClass:" w-8/12",attrs:{type:"number",placeholder:"填写权重"},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",e._n(t))},expression:"form.weight"}})],1)],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.close}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.okHandler}},[e._v("确 定")])],1)],1)},s=[],c=(n("b54a"),n("365c"));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={data:function(){return{dialogVisible:!1,modalData:"",opType:"",typeOptions:[{label:"顶部导航栏",value:1},{label:"底部导航栏",value:2}],resolve:null,reject:null,rules:{name:[{required:!0,message:"请输入模块名称",trigger:"blur"}],chTitle:[{required:!0,message:"请输入中文标题",trigger:"blur"}],enTitle:[{required:!0,message:"请输入英文标题",trigger:"blur"}],weight:[{required:!0,message:"请输入权重",trigger:"blur"}],type:[{required:!0,message:"请输入菜单位置",trigger:"change"}],link:[{required:!0,message:"请输入链接",trigger:"change"}]},form:{id:"",name:"",chTitle:"",enTitle:"",weight:"",type:"",level:"",parent_id:"",link:""},cloneData:{}}},mounted:function(){this.cloneData=p({},this.form)},methods:{show:function(e,t){var n=this;return console.log("====level===="),console.log(this.form.level),this.opType=t.type,"add"===t.type&&(this.form=p({},this.cloneData)),"edit"===t.type&&(this.form={id:t.data.id,name:t.data.name,chTitle:t.data.chTitle,enTitle:t.data.enTitle,weight:t.data.weight,type:t.data.type,parent_id:t.data.parent_id,link:t.data.link.herf}),this.form.level=e,this.dialogVisible=!0,2==this.form.level&&(this.form.parent_id=t.data.id),new Promise((function(e,t){n.resolve=e,n.reject=t}))},close:function(){this.dialogVisible=!1,this.reject("取消")},okHandler:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(t){var n={title:{en:e.form.enTitle,zh:e.form.chTitle},link:{herf:e.form.link},parent_id:e.form.parent_id,type:e.form.type||0,name:e.form.name,weight:e.form.weight};"add"===e.opType?Object(c["a"])(n).then((function(t){e.dialogVisible=!1,e.resolve(t)})):Object(c["g"])(e.form.id,n).then((function(t){e.dialogVisible=!1,e.resolve(t)}))}}))}}},d=f,h=n("2877"),m=Object(h["a"])(d,a,s,!1,null,null,null),b=m.exports,g=n("958c");n("2ef0");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={components:{BlockDialog:b},data:function(){return{dialogKey:0,tableData:[]}},mounted:function(){this.getList()},methods:{getList:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["b"])({parent_id:"",types:[1,2],states:[1,5]});case 2:t=e.sent,n=t.result,r=[],n.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("banner"!=t.name){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(c["b"])({parent_id:t.id,states:[1,5]}).then((function(e){return e.result}));case 4:n=e.sent,l=y({},t,{chTitle:t.title.zh,enTitle:t.title.en,position:g["a"].position[t.type],statusText:g["a"].status[t.Meta.state]}),n?(l.children=[],l.children=n.map((function(e){return y({},e,{chTitle:e.title.zh,enTitle:e.title.en,position:"",statusText:g["a"].status[t.Meta.state],child:!0})})).sort((function(e,t){return e.weight-t.weight<0}))):l.children=[],r.push(l);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.tableData=r.sort((function(e,t){return e.weight-t.weight<0}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setUpOrDown:function(e){var t=this,n=1===e.Meta.state?5:1;Object(c["h"])(e.id,n).then((function(e){t.$message.success(1==n?"上架成功":"下架成功"),t.getList()}))},deleteMenu:function(e){var t=this;Object(c["h"])(e.id,2).then((function(e){t.$message.success("删除成功"),t.getList()}))},editParent:function(e){var t=this;console.log("====row===="),console.log(e),this.$refs.blockDialog.show(1,{type:"edit",data:e}).then((function(e){console.log(e),t.getList()})).catch((function(e){console.log(e)}))},addParentMenu:function(){var e=this;this.$refs.blockDialog.show(1,{type:"add"}).then((function(t){console.log(t),e.getList()})).catch((function(e){console.log(e)}))},addChild:function(e){var t=this;this.$refs.blockDialog.show(2,{type:"add",row:e}).then((function(e){t.getList(),console.log(e)})).catch((function(e){console.log(e)}))},editChild:function(e){var t=this;console.log("====edit child row===="),console.log(e),this.$refs.blockDialog.show(2,{type:"edit",data:e}).then((function(n){console.log("====edit child===="),console.log(e),t.getList()})).catch((function(e){console.log(e)}))}}},_=w,k=Object(h["a"])(_,r,l,!1,null,null,null);t["default"]=k.exports},"958c":function(e,t,n){"use strict";t["a"]={status:{1:"上架",2:"删除",5:"下架"},position:{1:"顶部导航栏",2:"底部导航栏"},displayModes:{1:"横版海报"},linkerType:[{label:1,name:"无交互"},{label:2,name:"跳转外链"},{label:3,name:"跳转内链"},{label:4,name:"跳转视频"}]}}}]);