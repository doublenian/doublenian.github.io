(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-227c9973"],{7884:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:" w-full px-10 pt-10"},[r("el-button",{staticClass:" mb-5",attrs:{type:"primary"},on:{click:e.addParentMenu}},[e._v("添加一级菜单")]),e._v(" "),r("el-table",{attrs:{data:e.tableData,"row-key":"id",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[r("el-table-column",{attrs:{prop:"name",label:"一级菜单"}}),e._v(" "),r("el-table-column",{attrs:{prop:"chTitle",label:"中文标题"}}),e._v(" "),r("el-table-column",{attrs:{prop:"enTitle",label:"英文标题"}}),e._v(" "),r("el-table-column",{attrs:{prop:"position",label:"所在版块"}}),e._v(" "),r("el-table-column",{attrs:{prop:"weight",label:"排序"}}),e._v(" "),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-tag",{attrs:{type:1===n.Meta.state?"success":"danger"}},[e._v(e._s(n.statusText))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"260px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.child?e._e():r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.addChild(n)}}},[e._v("添加子菜单")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.setUpOrDown(n)}}},[e._v(e._s(1==n.Meta.state?"下架":"上架"))]),e._v(" "),n.child?[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.deleteMenu(n)}}},[e._v("删除")])]:0===n.children.length?[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.deleteMenu(n)}}},[e._v("删除")])]:void 0]}}])})],1),e._v(" "),r("block-dialog",{ref:"blockDialog"})],1)},l=[],o=(r("8e6e"),r("456d"),r("55dd"),r("bd86")),i=(r("7f7f"),r("ac6a"),r("96cf"),r("3b8d")),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"添加一级菜单",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-type":"right","label-width":"80px"}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"模块名称",prop:"name"}},[r("el-input",{staticClass:" w-1/2",model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"中文标题",prop:"chTitle"}},[r("el-input",{staticClass:" w-full",model:{value:e.form.chTitle,callback:function(t){e.$set(e.form,"chTitle",t)},expression:"form.chTitle"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"英文标题",prop:"enTitle"}},[r("el-input",{staticClass:" w-full",model:{value:e.form.enTitle,callback:function(t){e.$set(e.form,"enTitle",t)},expression:"form.enTitle"}})],1)],1),e._v(" "),1==e.form.level?r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"菜单位置",prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择菜单位置"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1):e._e(),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"权重",prop:"weight"}},[r("el-input",{staticClass:" w-8/12",attrs:{type:"number",placeholder:"填写权重"},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",e._n(t))},expression:"form.weight"}})],1)],1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.close}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.okHandler}},[e._v("确 定")])],1)],1)},s=[],c=r("365c");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={data:function(){return{dialogVisible:!1,modalData:"",typeOptions:[{label:"顶部导航栏",value:1},{label:"底部导航栏",value:2}],resolve:null,reject:null,rules:{name:[{required:!0,message:"请输入模块名称",trigger:"blur"}],chTitle:[{required:!0,message:"请输入中文标题",trigger:"blur"}],enTitle:[{required:!0,message:"请输入英文标题",trigger:"blur"}],weight:[{required:!0,message:"请输入权重",trigger:"blur"}],type:[{required:!0,message:"请输入菜单位置",trigger:"change"}]},form:{name:"",chTitle:"",enTitle:"",weight:"",type:"",level:"",parent_id:""},cloneData:{}}},mounted:function(){this.cloneData=p({},this.form)},methods:{show:function(e,t){var r=this;return console.log("====level===="),console.log(this.form.level),"add"===t.type&&(this.form=p({},this.cloneData)),this.form.level=e,this.dialogVisible=!0,2==this.form.level&&(this.form.parent_id=t.row.id),new Promise((function(e,t){r.resolve=e,r.reject=t}))},close:function(){this.dialogVisible=!1,this.reject("取消")},okHandler:function(){var e=this;this.$refs.ruleForm.validate((function(t){t&&Object(c["a"])({title:{en:e.form.enTitle,zh:e.form.chTitle},parent_id:e.form.parent_id,type:e.form.type||0,name:e.form.name,weight:e.form.weight}).then((function(t){e.dialogVisible=!1,e.resolve(t)}))}))}}},d=f,h=r("2877"),b=Object(h["a"])(d,a,s,!1,null,null,null),m=b.exports,g=r("958c");r("2ef0");function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(r,!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y={components:{BlockDialog:m},data:function(){return{dialogKey:0,tableData:[]}},mounted:function(){this.getList()},methods:{getList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["b"])({parent_id:"",states:[1,5]});case 2:t=e.sent,r=t.result,n=[],r.forEach(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("banner"!=t.name){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(c["b"])({parent_id:t.id,states:[1,5]}).then((function(e){return e.result}));case 4:r=e.sent,l=w({},t,{chTitle:t.title.zh,enTitle:t.title.en,position:g["a"].position[t.type],statusText:g["a"].status[t.Meta.state]}),r?(l.children=[],l.children=r.map((function(e){return w({},e,{chTitle:e.title.zh,enTitle:e.title.en,position:"",statusText:g["a"].status[t.Meta.state],child:!0})})).sort((function(e,t){return e.weight-t.weight<0}))):l.children=[],n.push(l);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.tableData=n.sort((function(e,t){return e.weight-t.weight<0}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setUpOrDown:function(e){var t=this,r=1===e.Meta.state?5:1;Object(c["g"])(e.id,r).then((function(e){t.$message.success(1==r?"上架成功":"下架成功"),t.getList()}))},deleteMenu:function(e){var t=this;Object(c["g"])(e.id,2).then((function(e){t.$message.success("删除成功"),t.getList()}))},addParentMenu:function(){var e=this;this.$refs.blockDialog.show(1,{type:"add"}).then((function(t){console.log(t),e.getList()})).catch((function(e){console.log(e)}))},addChild:function(e){var t=this;this.$refs.blockDialog.show(2,{type:"add",row:e}).then((function(e){t.getList(),console.log(e)})).catch((function(e){console.log(e)}))},edit:function(e){this.$message.error("暂未实现")}}},O=y,_=Object(h["a"])(O,n,l,!1,null,null,null);t["default"]=_.exports},"958c":function(e,t,r){"use strict";t["a"]={status:{1:"上架",2:"删除",5:"下架"},position:{1:"顶部导航栏",2:"底部导航栏"},displayModes:{1:"横版海报",2:"竖版富文本"}}}}]);