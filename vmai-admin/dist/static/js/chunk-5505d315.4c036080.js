(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5505d315"],{"2bcc":function(t,e,r){},"345e":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.BaseUrl+"/admin/system/upload",headers:t.headers,name:"image","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?r("img",{staticClass:"avatar object-contain",attrs:{src:t.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])},i=[],a=r("5f87"),l={props:{url:{type:String,default:""}},computed:{imageUrl:{get:function(){return this.url},set:function(t){this.$emit("update:url",t)}}},data:function(){return{BaseUrl:"https://vc.uiop.xyz/api",headers:{Authorization:Object(a["a"])()}}},methods:{handleAvatarSuccess:function(t,e){this.imageUrl="https://"+t.url},beforeAvatarUpload:function(t){var e=t.size/1024/1024<10;return e||this.$message.error("上传图片大小不能超过 10MB!"),e}}},o=l,s=(r("8e4f"),r("2877")),c=Object(s["a"])(o,n,i,!1,null,null,null);e["a"]=c.exports},"386b":function(t,e,r){var n=r("5ca1"),i=r("79e5"),a=r("be13"),l=/"/g,o=function(t,e,r,n){var i=String(a(t)),o="<"+e;return""!==r&&(o+=" "+r+'="'+String(n).replace(l,"&quot;")+'"'),o+">"+i+"</"+e+">"};t.exports=function(t,e){var r={};r[t]=e(o),n(n.P+n.F*i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",r)}},"8e4f":function(t,e,r){"use strict";var n=r("2bcc"),i=r.n(n);i.a},"958c":function(t,e,r){"use strict";e["a"]={status:{1:"上架",2:"删除",5:"下架"},position:{1:"顶部导航栏",2:"底部导航栏"},displayModes:{1:"横版海报"},linkerType:[{label:1,name:"无交互"},{label:2,name:"跳转外链"},{label:3,name:"跳转内链"},{label:4,name:"跳转视频"}]}},b54a:function(t,e,r){"use strict";r("386b")("link",(function(t){return function(e){return t(this,"a","href",e)}}))},ba36:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:" w-full px-10 mt-12"},[r("el-button",{staticClass:" mb-5",attrs:{type:"primary"},on:{click:t.addBanner}},[t._v("添加公益")]),t._v(" "),r("el-table",{attrs:{data:t.list,border:""}},[r("el-table-column",{attrs:{prop:"title.zh",label:"公益标题"}}),t._v(" "),r("el-table-column",{attrs:{prop:"title.en",label:"公益英文标题"}}),t._v(" "),r("el-table-column",{attrs:{label:"图片",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[r("el-image",{staticClass:" w-20 h-20 object-contain",attrs:{src:e.bg.md+"?x-oss-process=image/resize,w_100",fit:"contain","preview-src-list":[e.bg.md]}})]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"weight",label:"权重"}}),t._v(" "),r("el-table-column",{attrs:{label:"超链",width:"240px"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("el-link",{attrs:{type:"primary",href:n.link.herf,target:"_blank"}},[t._v(t._s(n.link.herf))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("el-tag",{attrs:{type:1===n.Meta.state?"success":"danger"}},[t._v(t._s(n.statusText))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作",width:"160px"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.setUpOrDown(n)}}},[t._v(t._s(1==n.Meta.state?"下架":"上架"))]),t._v(" "),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.editMenu(n)}}},[t._v("编辑")]),t._v(" "),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.deleteMenu(n)}}},[t._v("删除")])]}}])})],1),t._v(" "),r("confirm-dialog",{ref:"confirmDialog"})],1)},i=[],a=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),l=(r("96cf"),r("3b8d")),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{title:"添加公益",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-form",{ref:"ruleForm",attrs:{model:t.form,"label-position":"right",rules:t.rules,"label-width":"120px"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"公益标题"}},[r("el-input",{staticClass:" w-11/12",model:{value:t.form.titleZh,callback:function(e){t.$set(t.form,"titleZh",e)},expression:"form.titleZh"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"英文公益标题"}},[r("el-input",{staticClass:" w-11/12",model:{value:t.form.titleEn,callback:function(e){t.$set(t.form,"titleEn",e)},expression:"form.titleEn"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"图片",prop:"mdImage"}},[r("image-uploader",{attrs:{url:t.form.mdImage},on:{"update:url":function(e){return t.$set(t.form,"mdImage",e)}}})],1)],1),t._v(" "),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"请输入链接",prop:"linker"}},[r("el-input",{staticClass:" w-11/12",model:{value:t.form.linker,callback:function(e){t.$set(t.form,"linker",e)},expression:"form.linker"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"权重",prop:"weight"}},[r("el-input",{staticClass:" w-8/12",attrs:{type:"number",placeholder:"填写权重"},model:{value:t.form.weight,callback:function(e){t.$set(t.form,"weight",t._n(e))},expression:"form.weight"}})],1)],1)],1)],1),t._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.close}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.okHandler}},[t._v("确 定")])],1)],1)},s=[],c=(r("b54a"),r("345e")),u=r("365c");function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(r,!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var m={components:{ImageUploader:c["a"]},data:function(){return{dialogVisible:!1,resolve:null,reject:null,opType:"",form:{mdImage:"",weight:100,titleZh:"",titleEn:"",linker:""},rules:{mdImage:[{required:!0,message:"请输入图片",trigger:"blur"}],linker:[{required:!0,message:"请输入链接",trigger:"blur"}]},cloneData:{}}},mounted:function(){this.cloneData=p({},this.form)},methods:{show:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add";return this.dialogVisible=!0,this.opType=r,this.form="add"==r?p({},this.cloneData):{id:t.id,mdImage:t.bg.md,titleZh:t.title.zh,titleEn:t.title.en,weight:t.weight,linker:t.link.herf},new Promise((function(t,r){e.resolve=t,e.reject=r}))},close:function(){this.dialogVisible=!1,this.reject("取消")},okHandler:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(e){var r={type:6,bg:{md:t.form.mdImage},weight:t.form.weight,title:{zh:t.form.titleZh,en:t.form.titleEn},link:{herf:t.form.linker}};"add"==t.opType?Object(u["a"])(r).then((function(e){t.dialogVisible=!1,t.resolve("确定")})):Object(u["g"])(t.form.id,r).then((function(e){t.dialogVisible=!1,t.resolve(e)}))}}))}}},d=m,b=r("2877"),h=Object(b["a"])(d,o,s,!1,null,"0275261c",null),g=h.exports,v=r("958c");function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(r,!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var O={components:{ConfirmDialog:g},data:function(){return{list:[]}},mounted:function(){this.getList()},methods:{addBanner:function(){var t=this;this.$refs.confirmDialog.show().then((function(e){t.getList()})).catch((function(t){}))},editMenu:function(t){var e=this;this.$refs.confirmDialog.show(t,"edit").then((function(t){e.getList()})).catch((function(t){}))},getList:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["b"])({types:[6],parent_id:"",states:[1,5]});case 2:e=t.sent,r=e.result,this.list=r.map((function(t){return y({},t,{statusText:v["a"].status[t.Meta.state]})}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),setUpOrDown:function(t){var e=this,r=1===t.Meta.state?5:1;Object(u["h"])(t.id,r).then((function(t){e.$message.success(1==r?"上架成功":"下架成功"),e.getList()}))},deleteMenu:function(t){var e=this;Object(u["h"])(t.id,2).then((function(t){e.$message.success("删除成功"),e.getList()}))}}},_=O,k=Object(b["a"])(_,n,i,!1,null,null,null);e["default"]=k.exports}}]);